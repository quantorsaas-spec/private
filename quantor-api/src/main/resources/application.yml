server:
  port: 8080

spring:
  application:
    name: quantor-api

  datasource:
    url: ${QUANTOR_DB_URL:jdbc:postgresql://127.0.0.1:5432/quantor}
    username: ${QUANTOR_DB_USER:quantor}
    password: ${QUANTOR_DB_PASSWORD:quantor}

  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  flyway:
    enabled: true
    # ЕДИНСТВЕННЫЙ ИСТОЧНИК МИГРАЦИЙ — classpath (из quantor-saas-infrastructure)
    locations: classpath:db/migration
    baseline-on-migrate: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus

  tracing:
    enabled: ${QUANTOR_TRACING_ENABLED:false}
    sampling:
      probability: ${QUANTOR_TRACING_SAMPLE_PROBABILITY:1.0}

  otlp:
    tracing:
      endpoint: ${QUANTOR_OTLP_ENDPOINT:}

quantor:
  telegram:
    enabled: true
    ops:
      enabled: false
    command:
      enabled: true

    botToken: ${QUANTOR_TELEGRAM_BOT_TOKEN:}
    allowedUserIds: ${QUANTOR_TELEGRAM_ALLOWED_USER_IDS:}
    adminChatId: ${QUANTOR_TELEGRAM_ADMIN_CHAT_ID:}

  lemonsqueezy:
    webhookSecret: ${QUANTOR_LEMONSQUEEZY_WEBHOOK_SECRET:}
    variantId:
      pro: ""
      proPlus: ""

  auth:
    issuer: "quantor"
    accessTokenMinutes: 30
    supportTokenMinutes: 10
    refreshTokenDays: 30
    jwtSecret: ${QUANTOR_JWT_SECRET:dev_jwt_secret_change_me}